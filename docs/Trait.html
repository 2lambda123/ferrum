<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Class: Trait | ferrum</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-jsdoc.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/tui-doc.css">

    
</head>
<body>
<nav class="lnb" id="lnb">
    <div class="logo" style="">
        
            <img src="img/toast-ui.png" width="100%" height="100%">
        
    </div>
    <div class="title">
        <h1><a href="index.html" class="link">ferrum</a></h1>
        
            <span class="version">v0.0.1</span>
        
    </div>
    <div class="search-container" id="search-container">
        <input type="text" placeholder="Search">
        <ul></ul>
    </div>
    
    <div class="lnb-api hidden"><h3>Classes</h3><ul><li><a href="HybridWeakMap.html">HybridWeakMap</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="HybridWeakMap_sub"></div></li><li><a href="Trait.html">Trait</a><button type="button" class="hidden toggle-subnav btn btn-link">  <span class="glyphicon glyphicon-plus"></span></button><div class="hidden" id="Trait_sub"><div class="member-type">Methods</div><ul class="inner"><li><a href="Trait.html#impl">impl</a></li><li><a href="Trait.html#implDerived">implDerived</a></li><li><a href="Trait.html#implStatic">implStatic</a></li><li><a href="Trait.html#implWild">implWild</a></li><li><a href="Trait.html#implWildStatic">implWildStatic</a></li><li><a href="Trait.html#invoke">invoke</a></li><li><a href="Trait.html#lookupType">lookupType</a></li><li><a href="Trait.html#lookupValue">lookupValue</a></li></ul></div></li></ul></div><div class="lnb-api hidden"><h3>Global</h3><ul><li><a href="global.html#aint">aint</a></li><li><a href="global.html#all">all</a></li><li><a href="global.html#and">and</a></li><li><a href="global.html#any">any</a></li><li><a href="global.html#append">append</a></li><li><a href="global.html#assertEquals">assertEquals</a></li><li><a href="global.html#assertUneq">assertUneq</a></li><li><a href="global.html#assign">assign</a></li><li><a href="global.html#Assign">Assign</a></li><li><a href="global.html#compose">compose</a></li><li><a href="global.html#concat">concat</a></li><li><a href="global.html#count">count</a></li><li><a href="global.html#curry">curry</a></li><li><a href="global.html#deepclone">deepclone</a></li><li><a href="global.html#Deepclone">Deepclone</a></li><li><a href="global.html#del">del</a></li><li><a href="global.html#Delete">Delete</a></li><li><a href="global.html#dict">dict</a></li><li><a href="global.html#each">each</a></li><li><a href="global.html#empty">empty</a></li><li><a href="global.html#enumerate">enumerate</a></li><li><a href="global.html#eq">eq</a></li><li><a href="global.html#Equals">Equals</a></li><li><a href="global.html#exec">exec</a></li><li><a href="global.html#extend">extend</a></li><li><a href="global.html#extend1">extend1</a></li><li><a href="global.html#filter">filter</a></li><li><a href="global.html#first">first</a></li><li><a href="global.html#flat">flat</a></li><li><a href="global.html#flattenTree">flattenTree</a></li><li><a href="global.html#foldl">foldl</a></li><li><a href="global.html#foldr">foldr</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#Get">Get</a></li><li><a href="global.html#has">has</a></li><li><a href="global.html#Has">Has</a></li><li><a href="global.html#identity">identity</a></li><li><a href="global.html#Immutable">Immutable</a></li><li><a href="global.html#into">into</a></li><li><a href="global.html#Into">Into</a></li><li><a href="global.html#is">is</a></li><li><a href="global.html#isdef">isdef</a></li><li><a href="global.html#isImmutable">isImmutable</a></li><li><a href="global.html#isPrimitive">isPrimitive</a></li><li><a href="global.html#iter">iter</a></li><li><a href="global.html#join">join</a></li><li><a href="global.html#keys">keys</a></li><li><a href="global.html#list">list</a></li><li><a href="global.html#lookahead">lookahead</a></li><li><a href="global.html#map">map</a></li><li><a href="global.html#mapSort">mapSort</a></li><li><a href="global.html#mod">mod</a></li><li><a href="global.html#mul">mul</a></li><li><a href="global.html#nand">nand</a></li><li><a href="global.html#next">next</a></li><li><a href="global.html#nor">nor</a></li><li><a href="global.html#not">not</a></li><li><a href="global.html#nth">nth</a></li><li><a href="global.html#obj">obj</a></li><li><a href="global.html#or">or</a></li><li><a href="global.html#pairs">pairs</a></li><li><a href="global.html#Pairs">Pairs</a></li><li><a href="global.html#pipe">pipe</a></li><li><a href="global.html#plus">plus</a></li><li><a href="global.html#prepend">prepend</a></li><li><a href="global.html#product">product</a></li><li><a href="global.html#range">range</a></li><li><a href="global.html#range0">range0</a></li><li><a href="global.html#reject">reject</a></li><li><a href="global.html#repeat">repeat</a></li><li><a href="global.html#replace">replace</a></li><li><a href="global.html#Replace">Replace</a></li><li><a href="global.html#reverse">reverse</a></li><li><a href="global.html#second">second</a></li><li><a href="global.html#seqEq">seqEq</a></li><li><a href="global.html#Sequence">Sequence</a></li><li><a href="global.html#setdefault">setdefault</a></li><li><a href="global.html#Setdefault">Setdefault</a></li><li><a href="global.html#shallowclone">shallowclone</a></li><li><a href="global.html#Shallowclone">Shallowclone</a></li><li><a href="global.html#size">size</a></li><li><a href="global.html#Size">Size</a></li><li><a href="global.html#skip">skip</a></li><li><a href="global.html#skipWhile">skipWhile</a></li><li><a href="global.html#slidingWindow">slidingWindow</a></li><li><a href="global.html#sum">sum</a></li><li><a href="global.html#supports">supports</a></li><li><a href="global.html#take">take</a></li><li><a href="global.html#takeDef">takeDef</a></li><li><a href="global.html#takeUntilVal">takeUntilVal</a></li><li><a href="global.html#takeWhile">takeWhile</a></li><li><a href="global.html#trySkip">trySkip</a></li><li><a href="global.html#trySlidingWindow">trySlidingWindow</a></li><li><a href="global.html#tryTake">tryTake</a></li><li><a href="global.html#type">type</a></li><li><a href="global.html#typedArrays">typedArrays</a></li><li><a href="global.html#typeIsImmutable">typeIsImmutable</a></li><li><a href="global.html#typename">typename</a></li><li><a href="global.html#uneq">uneq</a></li><li><a href="global.html#union">union</a></li><li><a href="global.html#union2">union2</a></li><li><a href="global.html#uniq">uniq</a></li><li><a href="global.html#values">values</a></li><li><a href="global.html#valueSupports">valueSupports</a></li><li><a href="global.html#withFunctionName">withFunctionName</a></li><li><a href="global.html#xnor">xnor</a></li><li><a href="global.html#xor">xor</a></li><li><a href="global.html#zip">zip</a></li><li><a href="global.html#zip2">zip2</a></li><li><a href="global.html#zipLeast">zipLeast</a></li><li><a href="global.html#zipLeast2">zipLeast2</a></li><li><a href="global.html#zipLongest">zipLongest</a></li><li><a href="global.html#zipLongest2">zipLongest2</a></li></ul></div>
</nav>
<div id="resizer"></div>

<div class="main" id="main">
    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>Trait<span class="signature">(name, sym)</span><span class="type-signature"></span></h2>
        
            <div class="class-description"><p>Helper for implementing generic functions/protocols.</p>
<p>Want to see the code? Scroll down to <code>Show me the code</code>.</p>
<h1>Traits, an introduction: Very specific interfaces that let you choose your guarantees</h1>
<p>This helps to implement a concept known as type classes in haskell,
traits in rust, protocols in elixir, protocols (like the iteration protocol)
in javascript.
This helper is not supposed to replace ES6 protocols, instead it is supposed
to expand on them and make them more powerfull.</p>
<p>Basically this allows you to declare an interface, similar to interfaces in
C++ or C# or Java. You declare the interface; anyone implementing this generic
interface (like the iterator protocol, or Size interface which can be used to
determine the size of a container) promises to obey the rules and the laws of
the interface.
This is much more specific than having a size() method for instance; size() is
just an name which might be reasonably used in multiple circumstances; e.g. one
might use the name size() for a container that can have a <code>null</code> size, or return
a tuple of two numbers because the size is two dimensional. Or it might require
io to return the size or be complex to compute (e.g. in a linked list).</p>
<p>A size() method may do a lot of things, the Size trait however has a highly specific
definition: It returns the size of a container, as a Number which must be greater than
zero and cannot be null. The size must be efficient to compute as well.</p>
<p>By using the Size trait, the developer providing an implementation specifically says
'I obey those rules'. There may even be a second trait called <code>Size</code> with it's own rules.
The trait class is written in a way so those two would not interfere.</p>
<h2>Traits do not provide type checks</h2>
<p>Because we are in javascript, these guarantees are generally not enforced by the type system
and the dev providing an implementation is still responsible for writing extensive tests.</p>
<h1>Traits provide abstraction: Think about what you want to do, not how you want to do it</h1>
<p>One specific feature traits provide is that they let you state what you want to do instead of how
to do it.
Need to determine the size of a container? Use <code>.length</code> for arrays and strings,
use <code>.size</code> for ES6 Maps and Sets and a for loop to determine the size of an object.
Or you could just use the Size trait and call <code>size(thing)</code> which works for all of these
types. This is one of the features traits provide; define an implementation for a trait
once and you no longer have to think about how to achieve a thing, just what to achieve.</p>
<h1>Show me the code</h1>
<pre class="prettyprint source"><code>// Declaring a trait
const Size = new Trait('Size');

// Using it
const size = (what) => Size.invoke(what);
const empty = (what) => size(what) === 0;

// Providing implementations for own types
class MyType {
  [Size.sym]() {
    return 42;
  }
}

// Providing implementations for third party types
Size.impl(Array, (x) => x.length); // Method of type Array
Size.impl(String, (x) => x.length);
Size.impl(Map, (x) => x.size);
Size.impl(Set, (x) => x.size);

Size.impl(Object, (x) => { // Note that this won't apply to subclasses
  let cnt = 0;
  for (const _ in x) cnt++;
  return cnt;
});

// Note: The two following examples would be a bad idea in reality,
// they are just here toshow the mechanism
Size.implStatic(null, (_) => 0); // Static implementation (for a value and not a type)

// This implementation will be used if the underlying type/value
// implements the magnitude trait
Size.implDerived([Magnitued], ([magnitude], v) => magnitude(v));

// This will be called as a last resort, so this must be very fast!
// This example would implement the `size` trait for any even number.
// Note how we just return `undefined` for non even numbers
Size.implWildStatic(
   (x) => type(x) === Number && x % 2 == 0 ? (x => x) : undefined);

// test if an object is a dom node
const isNode = o =>
    typeof Node === &quot;object&quot;
       ? o instanceof Node
       : o && typeof o === &quot;object&quot;
           && typeof o.nodeType === &quot;number&quot;
           && typeof o.nodeName===&quot;string&quot;;

// Last resort lookup for types. Implements Size for any dom nodes…
Size.implWild(
   (t) => isNodeType(t) ? ((elm) => elm.childElementCount) : undefined);


// Using all the implementations
size([1,2,3]) # => 3
size({foo: 42}) # => 1
size(new Set([1,2,3])) # => 3
size(new MyType()) # => 42
size(null) # => 0
size(document.body) # => 1
</code></pre>
<h1>Implementing traits for third party types</h1>
<p>This is another feature that makes traits particularly useful! Java for instance
has interfaces, but the creator of a class/type must think of implementing a specific interface;
this is particularly problematic if the type is from a library; the interface must
either come from the standard library or from that particular library.</p>
<p>This usually is not very helpful; with traits this is not a problem at all.
Just use <code>MyTrait.impl</code> as in the example above.</p>
<h1>Subclassing the Trait class</h1>
<p>You may subclass Trait and overwrite any of it's methods.</p></div>
        
    
</header>

<article>
    
        <div class="container-overview">
        
            

<dt>
    
        <h4 class="name" id="Trait">
            
                new <span class="type-signature"></span>Trait<span class="signature">(name, sym)</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line247">line 247</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Create a new Trait.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Create a new Trait.</p>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>name</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last"><p>The name of the trait</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>sym</code></td>
            

            <td class="type">
            
                
<span class="param-type">Symbol</span>
|

<span class="param-type">null</span>


            
            </td>

            

            

            <td class="description last"><p>Symbol associated with the trait; this symbol
will be available under <code>MyTrait.sym</code> for devs to implement their
interfaces with. This parameter is usually left empty; in this case a
new symbol is created for the trait. An example where the extra
parameter is used is the <code>Sequence</code> trait in <code>sequence.js</code>; this trait
is just a wrapper around the built in <code>Symbol.iterator</code> protocol, so
it's using it's symbol.</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

        
        </div>
    

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        <dl>
                

<dt>
    
        <h4 class="name" id="impl">
            
                <span class="type-signature"></span>impl<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line403">line 403</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Implement this trait for a class as a 'method'.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Implement this trait for a class as a 'method'. See examples above</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="implDerived">
            
                <span class="type-signature"></span>implDerived<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line417">line 417</a></code>
            </div>
            
        </h4>

        
        <p class="summary"><p>Implements a trait based on other traits</p>.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Implements a trait based on other traits</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="implStatic">
            
                <span class="type-signature"></span>implStatic<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line412">line 412</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Implement this trait for a value/as a 'static method'.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Implement this trait for a value/as a 'static method'. See examples above
Prefer impl() when possible since implementations using this function will
not show up in supports()/this.typeHasImpl().</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="implWild">
            
                <span class="type-signature"></span>implWild<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line426">line 426</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Arbitrary code implementation of this trait for types.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Arbitrary code implementation of this trait for types. See examples above
Prefer implWild() when possible since implementations using this function will
not show up in supports()/this.typeHasImpl().</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="implWildStatic">
            
                <span class="type-signature"></span>implWildStatic<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line431">line 431</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Arbitrary code implementation of this trait for values.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Arbitrary code implementation of this trait for values. See examples above</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="invoke">
            
                <span class="type-signature"></span>invoke<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line391">line 391</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Invoke the implementation.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Invoke the implementation. See examples above.</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="lookupType">
            
                <span class="type-signature"></span>lookupType<span class="signature">()</span><span class="type-signature"></span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line319">line 319</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Lookup the implementation of this trait for a specific type.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Lookup the implementation of this trait for a specific type.
Pretty much the same as lookupValue, just skips the value lookup steps…</p>
    </div>
    

    

    

    

    

    

    

    

    

    

    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            
                

<dt>
    
        <h4 class="name" id="lookupValue">
            
                <span class="type-signature"></span>lookupValue<span class="signature">(what)</span><span class="type-signature"> &rarr; {function|falsy-value}</span>
                
            
            <div class="container-source members">
                <code><a href="types.js.html">types.js</a></code>,
                <code><a href="types.js.html#line288">line 288</a></code>
            </div>
            
        </h4>

        
        <p class="summary">Find the implementation of this trait for a specific value.</p>
        
    
</dt>
<dd>

    
    <div class="description">
        <p>Find the implementation of this trait for a specific value.
This is used by <code>.invoke()</code>, <code>.supports()</code> and <code>.valueSupports</code>.</p>
<p>It uses the following precedence by default:</p>
<ul>
<li>Implementations added with <code>implStatic</code></li>
<li>Implementations using the symbol in a method of a prototype</li>
<li>Implementations added with <code>impl</code></li>
<li>Implementations added with <code>implDerived</code> in the order they where added</li>
<li>Implementations added with <code>implWild</code> in the order…</li>
<li>Implementations added with <code>implWildStatic</code> in the order…</li>
</ul>
<p>This function can be used directly in order to avoid a double lookiup
of the implementation:</p>
<pre class="prettyprint source"><code>const impl = MyTrait.lookupValue(what);
if (impl) {
  impl(what, ...);
} else {
  ...
}
</code></pre>
    </div>
    

    

    

    

    
    <div class="container-params">
        <h5>Parameters:</h5>
        
<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>what</code></td>
            

            <td class="type">
            
                
<span class="param-type">Any</span>


            
            </td>

            

            

            <td class="description last"><p>The thing to find an implementation for</p></td>
        </tr>

    
    </tbody>
</table>

    </div>
    

    

    

    

    

    

    
    <div class="container-returns">
        <h5>Returns:</h5>
        
                



<span class="param-type">function</span>
|

<span class="param-type">falsy-value</span>





- <p>The function that was found or nothing.
Takes the same parameters as <code>.invoke(what, ...args)</code>, so if you are not
using invoke, you must specify <code>what</code> twice; once in the <code>lookupValue</code> call, once
in the invocation.</p>




            
    </div>
    

    


<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    
</dl>


    

</dd>

            </dl>
    

    

    
</article>

</section>




</div>

<footer>
    <img class="logo" src="img/toast-ui.png" style="">
    <div class="footer-text">NHN Entertainment. Frontend Development Lab</div>
</footer>
<script>prettyPrint();</script>
<script src="scripts/jquery.min.js"></script>
<script src="scripts/tui-doc.js"></script>
<script src="scripts/linenumber.js"></script>

    <script>
        var id = 'Trait_sub'.replace(/"/g, '_');
        var selectedApi = document.getElementById(id); // do not use jquery selector
        var $selectedApi = $(selectedApi);

        $selectedApi.removeClass('hidden');
        $selectedApi.parent().find('.glyphicon').removeClass('glyphicon-plus').addClass('glyphicon-minus');
        showLnbApi();
    </script>

</body>
</html>